# 医美诊所ERP系统测试用例

## 测试分类体系

### 1. 功能测试用例
- 业务流程测试
- 数据验证测试
- 权限控制测试
- 集成接口测试

### 2. 非功能测试用例
- 性能测试
- 并发测试
- 安全测试
- 可用性测试

---

## 一、预约管理测试用例

### 1.1 新预约功能测试

#### TC_001: 正常新预约流程
**前置条件：** 系统正常运行，用户已登录
**测试步骤：**
1. 客服选择"新预约"功能
2. 输入客户基本信息（姓名、电话、性别、年龄）
3. 选择预约时间（工作日 9:00-18:00）
4. 选择治疗项目（从项目列表中选择）
5. 选择医生（根据项目适配医生）
6. 确认预约信息并保存

**预期结果：**
- 预约记录成功创建
- 系统自动生成预约编号
- 创建"到诊提醒"任务（预约日期前一天执行）
- 预约状态为"已预约"

#### TC_002: 预约时间冲突检测
**前置条件：** 系统中已存在预约记录
**测试步骤：**
1. 客服尝试预约已被占用的时间段
2. 系统检测时间冲突

**预期结果：**
- 系统提示"该时间段已被预约"
- 建议可选的替代时间段
- 预约创建失败

#### TC_003: 预约信息验证
**测试数据：**
```
无效电话号码: "123"
空姓名: ""
超长姓名: "超过50个字符的姓名..."
无效时间: "2023-12-32 25:00"
非工作时间: "2024-01-01 08:00"
```

**预期结果：**
- 电话号码格式验证失败
- 必填字段验证失败
- 字段长度限制验证
- 时间有效性验证
- 营业时间限制验证

#### TC_004: 预约取消功能
**前置条件：** 存在有效预约记录
**测试步骤：**
1. 查找预约记录
2. 选择取消预约
3. 输入取消原因
4. 确认取消

**预期结果：**
- 预约状态更新为"已取消"
- 记录取消时间和原因
- 释放预约时间段
- 取消相关提醒任务

### 1.2 计划预约功能测试

#### TC_005: 计划预约创建
**前置条件：** 完成治疗的客户档案
**测试步骤：**
1. 系统根据随访规则自动创建计划预约任务
2. 客服收到预约提醒（预约日期前一天）
3. 客服联系客户确认预约时间
4. 更新预约记录

**预期结果：**
- 系统按随访间隔自动创建任务
- 任务分派给正确的客服人员
- 预约确认后状态更新

---

## 二、接待管理测试用例

### 2.1 到诊确认测试

#### TC_006: 正常到诊流程
**前置条件：** 客户已预约且按时到诊
**测试步骤：**
1. 前台确认客户身份
2. 验证预约信息
3. 确认到诊时间
4. 更新预约状态为"已到诊"

**预期结果：**
- 预约记录状态更新
- 自动创建接诊任务
- 通知相关医生

#### TC_007: 客户档案维护
**测试步骤：**
1. 检查客户基本信息完整性
2. 更新客户联系方式
3. 添加紧急联系人信息
4. 保存档案更新

**验证点：**
- 必填字段完整性检查
- 数据格式验证
- 历史记录保存

#### TC_008: 健康调查记录
**测试步骤：**
1. 引导客户填写健康调查表
2. 记录过敏史
3. 记录既往病史
4. 记录当前用药情况

**预期结果：**
- 健康档案完整记录
- 风险提示标识
- 医生可查看完整健康信息

---

## 三、接诊管理测试用例

### 3.1 面诊评估测试

#### TC_009: 医生面诊评估
**前置条件：** 客户已完成接待流程
**测试步骤：**
1. 医生查看客户档案和健康调查
2. 进行面诊检查
3. 记录客户主诉
4. 评估客户适应症
5. 保存评估记录

**预期结果：**
- 评估记录完整保存
- 包含客户主诉、检查结果、医生评估
- 为治疗方案制定提供依据

#### TC_010: 诊断和治疗方案
**测试步骤：**
1. 基于面诊评估制定治疗方案
2. 选择适合的治疗项目
3. 说明治疗风险和预期效果
4. 记录诊断和处理意见

**预期结果：**
- 治疗方案记录完整
- 包含项目选择依据
- 风险告知记录

---

## 四、收费管理测试用例

### 4.1 收费处理测试

#### TC_011: 标准收费流程
**前置条件：** 客户已确定治疗方案
**测试数据：**
```
治疗项目: "超声炮全模式"
标准价格: 30000元
支付方式: "现金/刷卡/转账"
```

**测试步骤：**
1. 根据治疗方案生成收费单
2. 选择收费类型（项目疗程/年度套餐/活动价格）
3. 应用折扣（如适用）
4. 确认支付方式
5. 完成收费

**预期结果：**
- 收费记录准确生成
- 折扣计算正确
- 支付状态更新

#### TC_012: 折扣计算测试
**测试数据：**
```
原价: 30000元
7折优惠: 21000元
8折优惠: 24000元
套餐折扣: 自定义
```

**验证点：**
- 折扣计算准确性
- 折扣权限验证
- 折扣记录完整性

#### TC_013: 退费处理
**前置条件：** 客户要求退费
**测试步骤：**
1. 查询原收费记录
2. 验证退费条件
3. 计算退费金额
4. 获得授权审批
5. 处理退费

**预期结果：**
- 退费金额计算正确
- 审批流程完整
- 退费记录可追溯

---

## 五、治疗管理测试用例

### 5.1 治疗执行测试

#### TC_014: 知情同意书签署
**测试步骤：**
1. 向客户说明治疗风险
2. 客户阅读知情同意书
3. 客户签署同意书
4. 保存签署记录

**预期结果：**
- 签署时间准确记录
- 电子签名保存
- 法律效力确认

#### TC_015: 治疗项目执行
**前置条件：** 已签署知情同意书
**测试步骤：**
1. 确认治疗项目和参数
2. 记录参与医护人员
3. 执行治疗并记录过程
4. 记录治疗参数和指标
5. 完成治疗确认

**预期结果：**
- 治疗记录完整详细
- 包含治疗参数、时间、人员信息
- 为后续治疗提供参考

#### TC_016: 项目核销处理
**测试步骤：**
1. 确认治疗项目完成
2. 核销对应的收费项目
3. 更新项目剩余次数
4. 记录产品出库信息

**预期结果：**
- 核销记录准确
- 库存信息同步更新
- 客户账户余额正确

#### TC_017: 术后注意事项
**测试步骤：**
1. 生成术后注意事项
2. 向客户说明注意事项
3. 发送注意事项到客户手机
4. 记录发送状态

**预期结果：**
- 注意事项发送成功
- 客户确认接收
- 发送记录可查询

---

## 六、随访管理测试用例

### 6.1 随访任务管理

#### TC_018: 自动随访任务创建
**前置条件：** 治疗完成，系统配置随访间隔
**测试数据：**
```
治疗项目: "保妥适肉毒素"
随访间隔: [1天, 7天, 1个月, 3个月, 6个月]
```

**测试步骤：**
1. 治疗完成后，系统自动创建随访任务
2. 按间隔时间安排随访提醒
3. 分派给相应的随访人员

**预期结果：**
- 随访任务按时创建
- 任务分派正确
- 提醒时间准确

#### TC_019: 随访执行
**测试步骤：**
1. 随访人员接收随访任务
2. 联系客户进行随访
3. 记录客户反馈
4. 评估治疗效果
5. 安排后续治疗（如需要）

**预期结果：**
- 随访记录完整
- 客户满意度评价
- 后续预约安排

#### TC_020: 随访失败处理
**测试场景：** 客户无法联系或拒绝随访
**测试步骤：**
1. 尝试多种方式联系客户
2. 记录联系失败原因
3. 设置重试计划
4. 更新客户状态

**预期结果：**
- 失败原因记录清楚
- 重试机制生效
- 客户状态正确更新

---

## 七、系统集成测试用例

### 7.1 业务流程端到端测试

#### TC_021: 完整业务流程测试
**测试场景：** 从预约到随访的完整流程
**测试步骤：**
1. 新客户预约
2. 到诊接待
3. 医生接诊
4. 收费处理
5. 治疗执行
6. 随访管理

**验证点：**
- 每个环节数据传递正确
- 状态转换准确
- 任务自动分派
- 时间节点控制

#### TC_022: 角色权限验证
**测试数据：**
```
角色配置:
- 客服: [预约、接待、收费、随访]
- 医生: [接诊、治疗]
- 护士: [治疗、随访]
- 管理员: [所有权限]
```

**验证点：**
- 权限边界控制
- 跨权限操作拦截
- 敏感数据访问控制

### 7.2 异常场景测试

#### TC_023: 并发预约冲突
**测试场景：** 多个客服同时预约同一时间段
**预期结果：**
- 只有一个预约成功
- 其他预约被拒绝并提示冲突
- 数据一致性保持

#### TC_024: 系统故障恢复
**测试场景：** 模拟系统故障和恢复
**验证点：**
- 数据完整性保护
- 事务回滚正确
- 故障恢复后系统正常

---

## 八、性能测试用例

### 8.1 负载测试

#### TC_025: 并发用户测试
**测试条件：**
- 并发用户数：50
- 测试时长：30分钟
- 业务操作：预约、查询、更新

**验证指标：**
- 平均响应时间 < 2秒
- 95%响应时间 < 5秒
- 错误率 < 0.1%

#### TC_026: 数据库性能测试
**测试场景：**
- 大量历史数据查询
- 复杂报表生成
- 批量数据处理

**验证指标：**
- 查询响应时间
- 数据库连接池使用率
- 内存使用情况

---

## 九、安全测试用例

### 9.1 数据安全测试

#### TC_027: 敏感信息保护
**验证点：**
- 客户个人信息加密存储
- 健康档案访问权限控制
- 支付信息安全处理

#### TC_028: 操作审计测试
**验证点：**
- 关键操作日志记录
- 数据修改追踪
- 用户操作轨迹

---

## 十、测试数据管理

### 10.1 测试数据准备

#### 基础测试数据
```json
{
  "客户信息": [
    {
      "姓名": "张三",
      "电话": "13800138000",
      "性别": "女",
      "年龄": 28,
      "健康状况": "良好"
    },
    {
      "姓名": "李四",
      "电话": "13900139000", 
      "性别": "男",
      "年龄": 35,
      "健康状况": "过敏体质"
    }
  ],
  "医生信息": [
    {
      "姓名": "王医生",
      "专业": "医学美容",
      "级别": "主治医师",
      "擅长项目": ["保妥适", "超声炮"]
    }
  ],
  "治疗项目": [
    {
      "名称": "超声炮全模式",
      "价格": 30000,
      "适应症": "松垂",
      "疗程": "1年"
    }
  ]
}
```

### 10.2 测试环境配置

#### 环境要求
- 独立测试数据库
- 模拟外部接口
- 测试用户账号
- 测试设备配置

---

## 测试执行计划

### 阶段一：单元测试（第1-2周）
- 各业务模块功能测试
- 数据验证测试
- 基础异常处理测试

### 阶段二：集成测试（第3-4周）
- 业务流程端到端测试
- 系统间接口测试
- 权限和安全测试

### 阶段三：系统测试（第5-6周）
- 性能测试
- 压力测试
- 用户验收测试

### 阶段四：回归测试（第7周）
- 缺陷修复验证
- 完整功能回归
- 最终验收确认

---

## 测试完成标准

### 功能测试通过标准
- 所有功能测试用例通过率 ≥ 95%
- 关键业务流程无阻断性缺陷
- 数据完整性和一致性验证通过

### 性能测试通过标准
- 平均响应时间 < 2秒
- 并发50用户无性能问题
- 系统稳定运行24小时无故障

### 安全测试通过标准
- 无高危安全漏洞
- 敏感数据保护措施有效
- 权限控制机制完善 